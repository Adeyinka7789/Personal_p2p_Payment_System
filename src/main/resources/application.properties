spring.application.name=ppps

# ============================
# DATABASE CONFIGURATION
# ============================
spring.datasource.url=jdbc:postgresql://localhost:5432/ppps_db
spring.datasource.username=ppps_user
spring.datasource.password=local_test_password
spring.datasource.driver-class-name=org.postgresql.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false

# ============================
# REDIS CONFIGURATION
# ============================
spring.redis.host=localhost
spring.redis.port=6379

# ============================
# APPLICATION SETTINGS
# ============================
# FIX: Changed port to 9090 to avoid conflict with Docker
server.port=9090
app.currency=NGN
app.transfer-latency-target=200ms
app.pin.hashing-algorithm=bcrypt

# ============================
# JWT CONFIGURATION
# ============================
# Secret is already fixed to be long enough
jwt.secret=ThisIsAMuchLongerSecretKeyForTestingThatMeetsTheHS512BitRequirement123456
jwt.expiration=86400000

# ============================
# MONITORING / ACTUATOR
# ============================
management.endpoints.web.exposure.include=health,metrics,prometheus
management.metrics.export.prometheus.enabled=true
management.endpoint.health.show-details=always

# Fee config example: NGN fixed 50 + 1.5% (0.015)
app.fee.fixed=50.00
app.fee.percentage=0.015
app.fee.scale=2

# Platform wallet (set to actual wallet UUID)
app.platform-wallet-id=11111111-1111-1111-1111-111111111111

# ============================
# KAFKA CONFIGURATION
# ============================
spring.kafka.bootstrap-servers=localhost:9094
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer
spring.kafka.consumer.properties.spring.json.trusted.packages=*
spring.kafka.consumer.group-id=ppps-group

# Kafka topic for completed transactions
kafka.topics.transactions-completed=transactions.completed

# ======================================================
# TWILIO CONFIGURATION
# ======================================================
twilio.account.sid=ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
twilio.auth.token=your_twilio_auth_token
twilio.phone.number=+15017122661  # Your registered Twilio sending phone number

# ======================================================
# SENDGRID CONFIGURATION
# ======================================================
sendgrid.api.key=SG.XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
sendgrid.from.email=noreply@yourdomain.com # Your verified SendGrid sender email


server.tomcat.remoteip.allowed-hosts=https://ef957486f0d1.ngrok-free.app

# ============================
# WEBHOOK CONFIGURATION
# ============================
app.webhook.secret=your-webhook-secret-key-change-in-production
app.webhook.timeout=5000
app.webhook.max-retries=3

# Webhook endpoints (for external services to call)
app.webhook.deposit-url=https://your-domain.com/api/v1/webhooks/deposit
app.webhook.withdrawal-url=https://your-domain.com/api/v1/webhooks/withdrawal

# Webhook security
app.webhook.signature-header=X-Webhook-Signature
app.webhook.allowed-ips=127.0.0.1,192.168.1.1

# Kafka topics for webhook events
kafka.topics.deposit-completed=deposit.completed
kafka.topics.withdrawal-completed=withdrawal.completed